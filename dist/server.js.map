{"version":3,"sources":["../server.js"],"names":["console","log","app","use","logger","restrict","admin","listen","req","res","next","method","url","test","setHeader","end"],"mappings":"AAAA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AALAA,QAAQC,GAAR,CAAY,EAAZ;;;AAOA,IAAMC,MAAI,wBAAV;AACAA,IAAIC,GAAJ,CAAQC,MAAR;AACA;AACAF,IAAIC,GAAJ,CAAQ,QAAR,EAAiBE,QAAjB,E,CAA4B;AAC5BH,IAAIC,GAAJ,CAAQ,QAAR,EAAiBG,KAAjB;;AAEAJ,IAAIK,MAAJ,CAAW,MAAX,EAAkB,YAAU;AACxBP,YAAQC,GAAR,CAAY,+BAAZ;AACH,CAFD;;AAIA;AACA,SAASG,MAAT,CAAgBI,GAAhB,EAAoBC,GAApB,EAAwBC,IAAxB,EAA6B;AACzBV,YAAQC,GAAR,CAAY,OAAZ,EAAoBO,IAAIG,MAAxB,EAA+BH,IAAII,GAAnC;AACAF;AACH;AACD,SAASG,IAAT,CAAcL,GAAd,EAAkBC,GAAlB,EAAsBC,IAAtB,EAA2B;AACvBD,QAAIK,SAAJ,CAAc,cAAd,EAA6B,YAA7B;AACAL,QAAIK,SAAJ,CAAc,6BAAd,EAA6C,GAA7C,EAFuB,CAE6B;AACpD;AACAL,QAAIK,SAAJ,CAAc,cAAd,EAA6B,yBAA7B;AACAL,QAAIM,GAAJ,CAAQ,aAAR;AACH;;AAED,SAASV,QAAT,CAAkBG,GAAlB,EAAsBC,GAAtB,EAA0BC,IAA1B,EAA+B;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACAA;AACA;AACA;AACA;AACA;AAEH;AACD,SAASJ,KAAT,CAAeE,GAAf,EAAmBC,GAAnB,EAAuBC,IAAvB,EAA4B;AACxB,YAAOF,IAAII,GAAX;AACI,aAAK,QAAL;AACAC,iBAAKL,GAAL,EAASC,GAAT,EAAaC,IAAb;AACA;AACA,aAAK,GAAL;AACA;AACAD,gBAAIM,GAAJ,CAAQ,YAAR;AANJ;AAQH","file":"server.js","sourcesContent":["'use strict'\r\nconsole.log(12)\r\nimport http from 'http';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport mime from 'mime';\r\nimport connect from 'connect';\r\n\r\nconst app=connect();\r\napp.use(logger);\r\n// app.use('/',restrict);\r\napp.use('/admin',restrict); // 路由\r\napp.use('/admin',admin);\r\n\r\napp.listen('3006',function(){\r\n    console.log('server listening on port 3006')\r\n})\r\n\r\n// logger中间件--打日志\r\nfunction logger(req,res,next){\r\n    console.log('%s %s',req.method,req.url);\r\n    next();\r\n}\r\nfunction test(req,res,next){\r\n    res.setHeader('Content-Type','text/plain');\r\n    res.setHeader(\"Access-Control-Allow-Origin\", \"*\");  // 允许跨域\r\n    //告诉浏览器编码方式  \r\n    res.setHeader(\"Content-Type\",\"text/html;charset=UTF-8\" ); \r\n    res.end('hello world');\r\n}\r\n\r\nfunction restrict(req,res,next){\r\n    // var authorization=req.headers.authorization;\r\n    // if(!authorization)return next(new Error('Unauthorized'));\r\n\r\n    // var parts=authorization.split('');\r\n    // var scheme=parts[0];\r\n    // var auth=new Buffer(parts[1],'base64').toString().split(':');\r\n    // var user=auth[0];\r\n    // var pass=auth[1];\r\n    next();\r\n    // authenticateWithDataBase(user,pass,function(err){\r\n    //      if(err) return next(err);\r\n    //      next();\r\n    //  });\r\n\r\n}\r\nfunction admin(req,res,next){\r\n    switch(req.url){\r\n        case '/login':\r\n        test(req,res,next);\r\n        break;\r\n        case '/':\r\n        default:\r\n        res.end('try /login');\r\n    }\r\n}"]}